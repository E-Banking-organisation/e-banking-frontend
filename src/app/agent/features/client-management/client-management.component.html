<div class="client-management-container">

  <h1>Gestion des clients</h1>

  <!-- SEARCH -->
  <input type="text" placeholder="Rechercher..." [(ngModel)]="searchQuery" (input)="applyFilters()">

  <button (click)="showAddClientModal()">+ Nouveau client</button>

  <!-- TABLE -->
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nom</th>
        <th>Email</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let client of filteredClients">
        <td>{{ client.id?.substring(0, 8) }}</td>
        <td>{{ client.firstName }} {{ client.lastName }}</td>
        <td>{{ client.email }}</td>
        <td>
          <button (click)="viewClient(client.id!)">ğŸ‘</button>
          <button (click)="editClient(client)">âœ</button>
          <button (click)="deleteClient(client.id!)">ğŸ—‘</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- MODAL CREATE / UPDATE -->
  <div *ngIf="showClientModal" class="modal">
    <form [formGroup]="clientForm" (ngSubmit)="saveClient()">

      <input formControlName="firstName" placeholder="PrÃ©nom">
      <input formControlName="lastName" placeholder="Nom">
      <input formControlName="email" placeholder="Email">

      <input formControlName="phone" placeholder="TÃ©lÃ©phone">
      <input formControlName="address" placeholder="Adresse">

      <!-- PASSWORD (standalone ngModel) -->
      <input *ngIf="!isEditMode" type="password" placeholder="Mot de passe" [(ngModel)]="password"
        [ngModelOptions]="{ standalone: true }">

      <button type="submit" [disabled]="isSubmitting">
        {{ isEditMode ? 'Modifier' : 'CrÃ©er' }}
      </button>

      <button type="button" (click)="closeModal()">Annuler</button>
    </form>
  </div>

  <!-- DETAILS -->
  <div *ngIf="selectedClient">
    <h3>DÃ©tails client</h3>
    <p>ID: {{ selectedClient.id }}</p>
    <p>Nom: {{ selectedClient.firstName }} {{ selectedClient.lastName }}</p>
    <p>Email: {{ selectedClient.email }}</p>
    <button (click)="closeClientDetails()">Fermer</button>
  </div>

</div>